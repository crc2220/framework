{"filter":false,"title":"modals.js","tooltip":"/js/ui/modals.js","undoManager":{"mark":58,"position":58,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":120,"column":8},"end":{"row":121,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":121,"column":0},"end":{"row":121,"column":6}},"text":"\t     "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":121,"column":6},"end":{"row":121,"column":43}},"text":"$(this).parent('.ui_modal').remove();"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":121,"column":5},"end":{"row":121,"column":6}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":121,"column":6},"end":{"row":121,"column":19}},"text":"(this).parent"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":121,"column":29},"end":{"row":122,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":122,"column":0},"end":{"row":122,"column":5}},"text":"\t    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":5},"end":{"row":122,"column":6}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":6},"end":{"row":122,"column":8}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":7},"end":{"row":122,"column":9}},"text":"''"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":7},"end":{"row":122,"column":8}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":7},"end":{"row":122,"column":8}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":8},"end":{"row":122,"column":9}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":9},"end":{"row":122,"column":26}},"text":"ui_modal-overlay "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":25},"end":{"row":122,"column":26}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":27},"end":{"row":122,"column":28}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":28},"end":{"row":122,"column":29}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":29},"end":{"row":122,"column":30}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":30},"end":{"row":122,"column":31}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":31},"end":{"row":122,"column":32}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":32},"end":{"row":122,"column":33}},"text":"v"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":33},"end":{"row":122,"column":34}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":34},"end":{"row":122,"column":36}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":";"},{"action":"insertText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":37},"end":{"row":122,"column":39}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":38},"end":{"row":122,"column":39}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":37},"end":{"row":122,"column":38}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":122,"column":36},"end":{"row":122,"column":37}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":121,"column":5},"end":{"row":121,"column":29}},"text":"$('.ui_modal').remove();"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":124,"column":47},"end":{"row":125,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":125,"column":0},"end":{"row":125,"column":7}},"text":"\t      "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":125,"column":7},"end":{"row":125,"column":31}},"text":"$('.ui_modal').remove();"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":124,"column":7},"end":{"row":124,"column":9}},"text":"//"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":122,"column":4},"end":{"row":122,"column":37}},"text":" $('.ui_modal-overlay').remove();"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":127,"column":67},"end":{"row":128,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":128,"column":0},"end":{"row":128,"column":6}},"text":"\t    \t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":128,"column":6},"end":{"row":128,"column":39}},"text":" $('.ui_modal-overlay').remove();"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":128,"column":6},"end":{"row":128,"column":7}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":128,"column":5},"end":{"row":128,"column":6}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":128,"column":5},"end":{"row":128,"column":6}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":129,"column":7},"end":{"row":129,"column":9}},"text":"//"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":130,"column":8},"end":{"row":131,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":131,"column":0},"end":{"row":131,"column":5}},"text":"\t    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":131,"column":5},"end":{"row":132,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":132,"column":0},"end":{"row":132,"column":5}},"text":"\t    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":5},"end":{"row":132,"column":29}},"text":"$('.ui_modal').remove();"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":132,"column":29},"end":{"row":133,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":133,"column":0},"end":{"row":133,"column":5}},"text":"\t    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":5},"end":{"row":133,"column":29}},"text":"$('.ui_modal').remove();"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":17},"end":{"row":133,"column":18}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":18},"end":{"row":133,"column":19}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":19},"end":{"row":133,"column":20}},"text":"v"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":20},"end":{"row":133,"column":21}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":133,"column":21},"end":{"row":133,"column":22}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":133,"column":18},"end":{"row":133,"column":22}},"text":"over"},{"action":"insertText","range":{"start":{"row":133,"column":18},"end":{"row":133,"column":25}},"text":"overlay"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":132,"column":20},"end":{"row":132,"column":29}},"text":"remove();"},{"action":"insertText","range":{"start":{"row":132,"column":20},"end":{"row":132,"column":67}},"text":"fadeOut(300, function() { $(this).remove(); });"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":133,"column":28},"end":{"row":133,"column":37}},"text":"remove();"},{"action":"insertText","range":{"start":{"row":133,"column":28},"end":{"row":133,"column":75}},"text":"fadeOut(300, function() { $(this).remove(); });"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":128,"column":0},"end":{"row":129,"column":0}},"nl":"\n","lines":["\t    \t$('.ui_modal-overlay').remove();"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":125,"column":0},"end":{"row":126,"column":0}},"nl":"\n","lines":["\t      $('.ui_modal').remove();"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":124,"column":7},"end":{"row":124,"column":9}},"text":"//"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":127,"column":7},"end":{"row":127,"column":9}},"text":"//"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":157,"column":0},"end":{"row":157,"column":5}},"text":"}());"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":157,"column":0}},"nl":"\n","lines":["// Create an immediately invoked functional expression to wrap our code","(function() {","// Define our constructor","\tthis.Modal = function() {","\t    // Create global element references","\t    this.closeButton = null;","\t    this.modal = null;","\t    this.overlay = null;","","\t    // Determine proper prefix","\t    this.transitionEnd = transitionSelect();","","\t    // Define option defaults","\t    var defaults = {","\t      className: 'fade-and-drop',","\t      closeButton: true,","\t      content: \"\",","\t      maxWidth: 600,","\t      minWidth: 280,","\t      overlay: true","\t    };","","\t\t// Create options by extending defaults with the passed in arugments","\t\tif (arguments[0] && typeof arguments[0] === \"object\") {","\t\t  this.options = extend(defaults, arguments[0]);","\t\t}","\t}; // end this.Modal ","","// Public Methods","\tModal.prototype.open = function() {","\t\t// open code goes here","\t\t// Build out our Modal","\t    buildOut.call(this);","","\t    // Initialize our event listeners","\t    initializeEvents.call(this);","","\t    /*","\t     * After adding elements to the DOM, use getComputedStyle","\t     * to force the browser to recalc and recognize the elements","\t     * that we just added. This is so that CSS animation has a start point","\t     */","\t    window.getComputedStyle(this.modal).height;","","\t    /*","\t     * Add our open class and check if the modal is taller than the window","\t     * If so, our anchored class is also applied","\t     */","\t    this.modal.className = this.modal.className +","\t      (this.modal.offsetHeight > window.innerHeight ?","\t        \" ui_modal-open ui_modal-anchored\" : \" ui_modal-open\");","\t    this.overlay.className = this.overlay.className + \" ui_modal-open\";","\t};","","// Private Methods","\tfunction buildOut() {","","\t    var content, contentHolder, docFrag;","","\t    /*","\t     * If content is an HTML string, append the HTML string.","\t     * If content is a domNode, append its content.","\t     */","","\t    if (typeof this.options.content === \"string\") {","\t      content = this.options.content;","\t    } else {","\t      content = this.options.content.innerHTML;","\t    }","","\t    // Create a DocumentFragment to build with","\t    docFrag = document.createDocumentFragment();","","\t    // Create modal element","\t    this.modal = document.createElement(\"div\");","\t    this.modal.className = \"ui_modal \" + this.options.className;","\t    this.modal.style.minWidth = this.options.minWidth + \"px\";","\t    this.modal.style.maxWidth = this.options.maxWidth + \"px\";","","\t    // If closeButton option is true, add a close button","\t    if (this.options.closeButton === true) {","\t      this.closeButton = document.createElement(\"button\");","\t      this.closeButton.className = \"ui_modal-close close-button\";","\t      this.closeButton.innerHTML = \"x\";","\t      this.modal.appendChild(this.closeButton);","\t    }","","\t    // If overlay is true, add one","\t    if (this.options.overlay === true) {","\t      this.overlay = document.createElement(\"div\");","\t      this.overlay.className = \"ui_modal-overlay \" + this.options.classname;","\t      docFrag.appendChild(this.overlay);","\t    }","","\t    // Create content area and append to modal","\t    contentHolder = document.createElement(\"div\");","\t    contentHolder.className = \"ui_modal-content\";","\t    contentHolder.innerHTML = content;","\t    this.modal.appendChild(contentHolder);","","\t    // Append modal to DocumentFragment","\t    docFrag.appendChild(this.modal);","","\t    // Append DocumentFragment to body","\t    document.body.appendChild(docFrag);","","\t}","","\tModal.prototype.close = function() {","\t    // Store the value of this","\t    var _ = this;","","\t    // Remove the open class name","\t    this.modal.className = this.modal.className.replace(\" ui_modal-open\", \"\");","\t    this.overlay.className = this.overlay.className.replace(\" ui_modal-open\",","\t      \"\");","","\t    /*","\t     * Listen for CSS transitionend event and then","\t     * Remove the nodes from the DOM","\t     */","\t    ","\t   ","\t    this.modal.addEventListener(this.transitionEnd, function() {","\t      _.modal.parentNode.removeChild(_.modal);","\t    });","\t    this.overlay.addEventListener(this.transitionEnd, function() {","\t      if(_.overlay.parentNode) _.overlay.parentNode.removeChild(_.overlay);","\t    });","\t    ","\t    $('.ui_modal').fadeOut(300, function() { $(this).remove(); });","\t    $('.ui_modal-overlay').fadeOut(300, function() { $(this).remove(); });","","\t};","","","\tfunction transitionSelect() {","\t    var el = document.createElement(\"div\");","\t    if (el.style.WebkitTransition) return \"webkitTransitionEnd\";","\t    if (el.style.OTransition) return \"oTransitionEnd\";","\t    return 'transitionend';","\t}","","\tfunction initializeEvents() {","","\t    if (this.closeButton) {","\t      this.closeButton.addEventListener('click', this.close.bind(this));","\t    }","","\t    if (this.overlay) {","\t      this.overlay.addEventListener('click', this.close.bind(this));","\t    }","","\t}","","",""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1414944094014,"hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709"}